<template>
	<Modal>
		<div class="subscribe">
			<div class="subscribe__left">
				<form @submit.prevent="handleSubscribe" class="subscribe__left-form">
					<h3 class="subscribe__title">C—Ç–∞—Ç—å Premium</h3>
					<p class="subscribe__text subscribe__description">
						–£–∫–∞–∂–∏—Ç–µ –ø–æ—á—Ç—É, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ø—Ä–∏—Å–ª–∞—Ç—å –≤–∞–º –¥–µ—Ç–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏
					</p>
					<Input placeholder="Email" v-model="email" type="email" />
					<p class="subscribe__hint">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º–µ–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—á—Ç–µ</p>
					<p class="subscribe__text subscribe__subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ</p>
					<div class="subscribe__variants">
						<SubscribeVariant
							v-for="variant in subscribeVariants"
							:id="variant.id"
							:key="variant.id"
							:active="variant.id === selectedVariant.id"
							:price="variant.price"
							:duration="variant.duration"
							:detailPriceText="variant.detailPriceText"
							:tag="variant.tag"
							@setActive="setActiveVariant(variant)"
						/>
					</div>
					<p class="subscribe__hint">
						–ù–∞ –≤—Å–µ —Ç–∞—Ä–∏—Ñ—ã –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ <span>10 –¥–Ω–µ–π –≤—Å–µ–≥–æ –∑–∞ 19 —Ä—É–±.</span>
					</p>
					<div class="subscribe__bottom">
						<Button class="subscribe__btn" type="submit"
							>–°—Ç–∞—Ç—å Premium –Ω–∞ 10 –¥–Ω–µ–π –∑–∞ 19 —Ä—É–±.</Button
						>
						<p class="subscribe__hint subscribe__hint--center">
							–ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å
							<NuxtLink to="/">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</NuxtLink> –∏ <br />
							<NuxtLink to="/">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º</NuxtLink>
						</p>
					</div>
				</form>
			</div>
			<div class="subscribe__right">
				<h3 class="subscribe__right-head">
					<span class="subscribe__right-title">üèÜ Premium –Ω–∞ 12 –º–µ—Å—è—Ü–µ–≤</span>
					<span class="subscribe__right-trigger">19 —Ä—É–±.</span>
				</h3>
				<div class="subscribe__right-info">–°–µ–π—á–∞—Å –≤—ã –ø–ª–∞—Ç–∏—Ç–µ <span>–≤—Å–µ–≥–æ 19 —Ä—É–±.</span></div>
				<p class="subscribe__text">
					–ó–∞—Ç–µ–º —Å 16.02 –∑–∞ 6 –º–µ—Å. - 1990 —Ä. (100 —Ä. / –º–µ—Å). <br />
					–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –º–æ–∂–Ω–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç. –ú—ã —Ç–∞–∫–∂–µ –ø—Ä–∏—à–ª–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
					—Ç—Ä–∏–∞–ª-–ø–µ—Ä–∏–æ–¥–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –≤–∞–º–∏ –ø–æ—á—Ç—É.
				</p>
				<ul class="subscribe__list">
					<li v-for="(item, index) in subscribeBenefits" :key="index">
						<span class="subscribe__list-icon"
							><img src="/icons/input/icon_check.svg" alt=""
						/></span>
						<span>{{ item }}</span>
					</li>

					<li class="subscribe__list-blocks">
						<RatingBenefitBlock />
						<SpeedBenefitBlock />
					</li>
				</ul>

				<div class="subscribe__bottom subscribe__bottom--mobile">
					<Button @click="handleSubscribe" class="subscribe__btn"
						>–°—Ç–∞—Ç—å Premium –Ω–∞ 10 –¥–Ω–µ–π –∑–∞ 19 —Ä—É–±.</Button
					>
					<p class="subscribe__hint subscribe__hint--center">
						–ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å
						<NuxtLink to="/">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</NuxtLink> –∏ <br />
						<NuxtLink to="/">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º</NuxtLink>
					</p>
				</div>
			</div>
		</div>
	</Modal>
</template>

<script lang="ts" setup>
import subscribeService from '~/services/subscribe.service'
import { subscribeBenefits, subscribeVariants } from '~/shared/data/globalData'
import type { SubscribeVariant } from '~/shared/types/global.types'

const email = ref('')

const selectedVariant = ref<SubscribeVariant>(subscribeVariants[0])

const setActiveVariant = (variant: SubscribeVariant) => {
	selectedVariant.value = variant
}

const handleSubscribe = async () => {
	await subscribeService.subscribe({
		email: email.value,
		variant: selectedVariant.value,
	})
}
</script>

<style scoped lang="scss">
.subscribe {
	padding: 50px;
	display: flex;
	align-items: center;
	column-gap: 50px;

	@include tablet {
		flex-direction: column;
		row-gap: 32px;
	}

	@include big-mobile {
		padding: 24px 16px;
	}

	&__left {
		flex: 0 1 calc(50% - 25px);

		@include tablet {
			flex: 0 1 100%;
			width: 100%;
		}

		&-form {
			padding-right: 50px;
			border-right: 1px solid $black-80;

			@include tablet {
				padding-right: 0;
				border-right: none;
				border-bottom: 1px solid $black-80;
				padding-bottom: 32px;
			}
		}
	}

	&__title {
		color: $grey-20;
		font-size: 32px;
		font-weight: 700;
		line-height: 130%;
		margin-bottom: 16px;

		@include big-mobile {
			font-size: 24px;
		}
	}

	&__subtitle {
		margin-top: 30px;
		margin-bottom: 14px;
	}

	&__text {
		color: $grey-60;
		font-size: 16px;
		font-style: normal;
		font-weight: 500;
		line-height: 130%;

		@include big-mobile {
			font-size: 14px;
		}
	}

	&__description {
		margin-bottom: 14px;
	}

	&__hint {
		color: $grey-100;
		font-size: 12px;
		font-style: normal;
		font-weight: 400;
		line-height: 120%;
		margin-top: 12px;

		span {
			color: $white;
		}

		&--center {
			text-align: center;
		}

		a {
			color: $white;
			text-decoration-line: underline;
			text-decoration-style: dotted;
			text-decoration-skip-ink: auto;
			text-decoration-thickness: auto;
			text-underline-offset: auto;
			text-underline-position: from-font;
		}
	}

	&__variants {
		display: flex;
		flex-direction: column;
		row-gap: 16px;

		@include big-mobile {
			row-gap: 32px;
		}
	}

	&__btn {
		margin-top: 32px;
	}

	&__right {
		flex: 0 1 calc(50% - 25px);

		&-head {
			display: flex;
			align-items: center;
			justify-content: space-between;

			@include big-mobile {
				margin-bottom: 10px;
			}
		}

		&-title {
			text-wrap: nowrap;
			font-size: 24px;
			font-style: normal;
			font-weight: 600;
			line-height: 130%;
			color: $grey-20;

			@include big-mobile {
				font-size: 18px;
			}
		}

		&-trigger {
			margin-left: auto;
			text-wrap: nowrap;
			color: $grey-20;
			font-size: 24px;
			font-style: normal;
			font-weight: 600;
			line-height: 130%;
			padding: 14px;
			border-radius: 12px;
			background: $black-80;

			@include big-mobile {
				display: none;
			}
		}

		&-info {
			color: $grey-20;
			margin-bottom: 10px;
			font-size: 18px;
			font-weight: 500;
			line-height: 140%;

			@include big-mobile {
				font-size: 14px;
			}

			span {
				color: $accent;
			}
		}
	}

	&__list {
		margin-top: 32px;
		padding: 24px;
		border-radius: 12px;
		background: $black-80;
		backdrop-filter: blur(6.5px);
		display: flex;
		flex-direction: column;
		row-gap: 14px;

		@include big-mobile {
			display: none;
		}

		li {
			display: flex;
			align-items: center;
			column-gap: 8px;
			font-size: 14px;
			font-style: normal;
			font-weight: 500;
			line-height: 130%;
			color: $grey-20;
		}

		&-icon {
			width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			background: $black-60;
		}

		&-blocks {
			display: flex;
			justify-content: space-between;
			margin-top: 32px;
		}
	}

	&__bottom {
		@include big-mobile {
			display: none;
		}

		&--mobile {
			display: none;

			@include big-mobile {
				display: block;
			}
		}
	}
}
</style>
